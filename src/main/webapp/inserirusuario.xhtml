<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf/passthrough" lang="en">

<head>
	<title>Cadastro de Usuários</title>
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></link>
	<link rel="stylesheet"
		href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"></link>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		function confirmarExclusao(nome) {
			return window.confirm("Deseja excluir o " + nome + "?");
		}
	</script>
</head>
<body>
	<h3>Cadastro de Usuários</h3>
	<h:form id="form-cadastro" prependId="false" style="width: 400px;">
		<div class="form-group">
			<h:outputLabel jsf:for="nome" value="Nome:" />
			<h:inputText id="nome" value="#{usuarioController.usuario.nome}"
				styleClass="form-control" jsf:placeholder="Digite o nome"
				jsf:autofocus="true" />
		</div>

		<div class="form-group">
			<h:outputLabel jsf:for="login" value="Login:" />
			<h:inputText id="login" disabled="#{usuarioController.edicao}" styleClass="form-control"
				value="#{usuarioController.usuario.login}"
				jsf:placeholder="Digite o login" />
		</div>

		<div class="form-group">
			<h:outputLabel jsf:for="senha" 
				rendered="#{!usuarioController.edicao}" 
				value="Senha:" />
			<h:inputSecret id="senha" styleClass="form-control"
				value="#{usuarioController.usuario.senha}"
				rendered="#{!usuarioController.edicao}"
				jsf:placeholder="Digite a senha" />
		</div>

		<h:commandButton actionListener="#{usuarioController.prepararInclusao()}" 
			value="Novo" styleClass="btn btn-default" />
		<h:commandButton styleClass="btn btn-primary"
			actionListener="#{usuarioController.salvar()}" value="Salvar" />

	</h:form>

	<h:messages />

	<h:form>
		<h:dataTable value="#{usuarioController.usuarios}" var="usuario"
			styleClass="table table-hover table-condensed">
			<h:column>
				<f:facet name="header">#</f:facet>
				#{usuario.id}
			</h:column>
			<h:column>
				<f:facet name="header">Nome</f:facet>
				#{usuario.nome}
			</h:column>
			<h:column>
				<f:facet name="header">Login</f:facet>
				#{usuario.login}
			</h:column>
			<h:column>
				<f:facet name="header">Opções</f:facet>
				<h:commandButton actionListener="#{usuarioController.prepararEdicao(usuario)}" 
					value="Editar" styleClass="btn btn-default btn-xs" />
				<h:commandButton actionListener="#{usuarioController.excluir(usuario)}" 
					value="Excluir" styleClass="btn btn-danger btn-xs"
					onclick="return confirmarExclusao('#{usuario.nome}')" />
			</h:column>
		</h:dataTable>
	</h:form>
</body>
</html>